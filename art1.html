<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ART1 Web Implementation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    * { box-sizing: border-box; }
    body {
        font-family: monospace;
        margin: 0;
        padding: 10px;
        background: #f0f0f0;
    }
    h1 {
        color: #333;
        text-align: center;
        font-size: 1.2rem;
        margin-bottom: 15px;
    }
    .container {
        display: flex;
        flex-direction: column;
        background: white;
        padding: 10px;
        border-radius: 6px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .controls {
        background: #f8f8f8;
        padding: 10px;
        border-radius: 4px;
        margin-bottom: 10px;
    }
    .form-group {
        margin-bottom: 10px;
    }
    label {
        display: block;
        font-size: 0.9rem;
        margin-bottom: 4px;
    }
    select, input, button {
        width: 100%;
        padding: 8px;
        font-size: 1rem;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    button {
        background: #007bff;
        color: white;
        border: none;
        margin-bottom: 8px;
    }
    button:hover {
        background: #0056b3;
    }
    #artCanvas {
        font-family: monospace;
        white-space: pre;
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;
        width: 100%;
        height: 60vh;
        overflow: auto;
        padding: 8px;
        resize: none;
        font-size: 0.8rem;
    }
    .info {
        background: #e9ecef;
        padding: 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        text-align: center;
    }
    @media (min-width: 768px) {
        .container { flex-direction: row; gap: 20px; }
        .controls { width: 300px; }
        #artCanvas { height: 500px; font-size: 0.9rem; }
    }
</style>
</head>
<body>
<h1>ART1 Web Implementation</h1>
<div class="container">
    <div class="controls">
        <div class="form-group">
            <label for="shape">Shape</label>
            <select id="shape">
                <option value="line">Line</option>
                <option value="rectangle">Rectangle</option>
                <option value="triangle">Triangle</option>
            </select>
        </div>
        <div class="form-group">
            <label for="character">Character</label>
            <input type="text" id="character" maxlength="1" value="*">
        </div>
        <div class="form-group">
            <label for="startRow">Start Row</label>
            <input type="number" id="startRow" min="0" max="49" value="0">
        </div>
        <div class="form-group">
            <label for="startCol">Start Column</label>
            <input type="number" id="startCol" min="0" max="104" value="0">
        </div>
        <div class="form-group">
            <label for="size">Size</label>
            <input type="number" id="size" min="1" max="20" value="5">
        </div>
        <button onclick="addShape()">Add Shape</button>
        <button onclick="clearCanvas()" style="background:#dc3545;">Clear Canvas</button>
        <button onclick="downloadPNG()" style="background:#28a745;">Download PNG</button>
        <div class="info">
            Canvas size: 50x105 characters<br>Inspired by the original ART1 system (1970)
        </div>
    </div>
    <textarea id="artCanvas" readonly></textarea>
</div>
<script>
const ROWS = 50;
const COLS = 105;
let canvas = Array(ROWS).fill().map(()=>Array(COLS).fill(' '));

function updateCanvas(){
    document.getElementById('artCanvas').value = canvas.map(r=>r.join('')).join('\n');
}
function clearCanvas(){
    canvas = Array(ROWS).fill().map(()=>Array(COLS).fill(' '));
    updateCanvas();
}
function drawLine(r,c,s,ch){
    for(let i=0;i<s&&c+i<COLS;i++){if(r>=0&&r<ROWS&&c+i>=0){canvas[r][c+i]=ch;}}
}
function drawRectangle(r,c,s,ch){
    for(let i=0;i<s&&r+i<ROWS;i++){for(let j=0;j<s&&c+j<COLS;j++){if(r+i>=0&&c+j>=0){canvas[r+i][c+j]=ch;}}}
}
function drawTriangle(r,c,s,ch){
    for(let i=0;i<s&&r+i<ROWS;i++){
        const w=(i*2)+1;const off=Math.floor(w/2);
        for(let j=0;j<w&&c+j-off<COLS;j++){
            if(r+i>=0&&c+j-off>=0){canvas[r+i][c+j-off]=ch;}
        }
    }
}
function addShape(){
    const shape=document.getElementById('shape').value;
    const ch=document.getElementById('character').value||'*';
    const r=parseInt(document.getElementById('startRow').value)||0;
    const c=parseInt(document.getElementById('startCol').value)||0;
    const s=parseInt(document.getElementById('size').value)||5;
    if(shape==='line')drawLine(r,c,s,ch);
    if(shape==='rectangle')drawRectangle(r,c,s,ch);
    if(shape==='triangle')drawTriangle(r,c,s,ch);
    updateCanvas();
}

function downloadPNG() {
    const text = document.getElementById('artCanvas').value;
    const lines = text.split('\n');
    const fontSize = 14;
    const lineHeight = 18;
    const padding = 10;
    const width = Math.max(...lines.map(l => l.length)) * fontSize * 0.6 + padding * 2;
    const height = lines.length * lineHeight + padding * 2;

    const canvasEl = document.createElement('canvas');
    canvasEl.width = width;
    canvasEl.height = height;
    const ctx = canvasEl.getContext('2d');
    ctx.fillStyle = 'white';
    ctx.fillRect(0, 0, width, height);
    ctx.font = `${fontSize}px monospace`;
    ctx.fillStyle = 'black';

    lines.forEach((line, i) => {
        ctx.fillText(line, padding, padding + i * lineHeight);
    });

    const link = document.createElement('a');
    link.download = 'art1.png';
    link.href = canvasEl.toDataURL('image/png');
    link.click();
}

updateCanvas();
</script>
</body>
</html>

